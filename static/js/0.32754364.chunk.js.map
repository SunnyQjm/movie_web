{"version":3,"sources":["../static/js/0.32754364.chunk.js","containers/video/index.js"],"names":["webpackJsonp","830","module","__webpack_exports__","__webpack_require__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_react_redux__","__WEBPACK_IMPORTED_MODULE_1__components__","__WEBPACK_IMPORTED_MODULE_2__ActionType__","__WEBPACK_IMPORTED_MODULE_3__config_API__","__WEBPACK_IMPORTED_MODULE_4_antd_lib_message_index__","__WEBPACK_IMPORTED_MODULE_4_antd_lib_message_index___default","n","state","assign","VideoReducer","dispatch","loadMore","page","sortByTime","arguments","length","undefined","category","year","type","GET_MOVIES","URL","api","PARAM_PAGE","PARAM_SIZE","PARAM_ORDER_PROP","PARAM_ORDER","PARAM_TYPE","TYPE_VIDEO","CATEGORY_YEAR","axois","get","then","res","items","data","catch","err","console","log","a","info","changeTab","key"],"mappings":"AAAAA,cAAc,IAERC,IACA,SAAUC,EAAQC,EAAqBC,GAE7C,YACAC,QAAOC,eAAeH,EAAqB,cAAgBI,OAAO,GAC7C,IAAIC,GAA4CJ,EAAoB,KAChEK,EAA4CL,EAAoB,IAChEM,EAA4CN,EAAoB,IAChEO,EAA4CP,EAAoB,IAChEQ,EAAuDR,EAAoB,KAC3ES,EAA+DT,EAAoBU,EAAEF,ECQ9GT,GAAA,QAAeE,OAAAG,EAAA,GACX,SAACO,GACG,MAAAV,QAAAW,UACOD,EAAME,eAGjB,SAACC,GACG,OACIC,SAAU,SAACC,GAAuE,GAA7CC,IAA6CC,UAAAC,OAAA,OAAAC,KAAAF,UAAA,IAAAA,UAAA,KAAAA,UAAAC,OAAA,OAAAC,KAAAF,UAAA,KAAAA,UAAA,IAA1BG,EAA0BH,UAAA,GAAhBI,EAAgBJ,UAAAC,OAAA,OAAAC,KAAAF,UAAA,GAAAA,UAAA,GAAT,IACrEJ,IACIS,KAAMjB,EAAA,EACNe,SAAUA,GAEd,IAAMG,GAAajB,EAAA,EAAeiB,WAC9BC,EAASD,EAAWE,IAApB,IAA2BF,EAAWG,WAAtC,IAAoDX,EAApD,IAA4DQ,EAAWI,WAAvE,KAGDX,KACCQ,OAAWD,EAAWK,iBAAtB,cAAoDL,EAAWM,YAA/D,SACJL,OAAWD,EAAWO,WAAtB,IAAoCxB,EAAA,EAAeiB,WAAWQ,WAC3DX,GAAYA,IAAad,EAAA,EAAeiB,WAAWS,cAClDR,yCAA6CJ,EACxCA,IAAad,EAAA,EAAeiB,WAAWS,gBAC5CR,4CAAgDH,GACpDrB,OAAAM,EAAA,GAAoB,SAAA2B,GAChBA,EAAMC,IAAIV,GACLW,KAAK,SAAAC,GACFvB,GACIS,KAAMjB,EAAA,EACNe,SAAUA,EACVC,KAAMA,GAEV,IAAIgB,GAAQD,EAAIE,KAAKA,IAQjBzB,GAPCwB,GAA0B,IAAjBA,EAAMnB,QAQZI,KAAMjB,EAAA,EACNiC,KAAMD,EACNjB,SAAUA,EACVC,KAAMA,IATNC,KAAMjB,EAAA,EACNe,SAAUA,EACVC,KAAMA,MAWjBkB,MAAM,SAAAC,GACH3B,GACIS,KAAMjB,EAAA,EACNe,SAAUA,EACVC,KAAMA,IAEVR,GACIS,KAAMjB,EAAA,EACNe,SAAUA,EACVC,KAAMA,IAEVoB,QAAQC,IAAIF,GACZhC,EAAAmC,EAAQC,KAAK,iCAI7BC,UAAW,SAACC,GACRjC,GACIS,KAAMjB,EAAA,EACNiC,KAAMQ,QAKvB1C,EAAA","file":"static/js/0.32754364.chunk.js","sourcesContent":["webpackJsonp([0],{\n\n/***/ 830:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react_redux__ = __webpack_require__(107);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components__ = __webpack_require__(31);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ActionType__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config_API__ = __webpack_require__(35);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_lib_message_index__ = __webpack_require__(108);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_lib_message_index___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_antd_lib_message_index__);\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(__WEBPACK_IMPORTED_MODULE_0_react_redux__[\"b\" /* connect */])(function(state){return Object.assign({},state.VideoReducer);},function(dispatch){return{loadMore:function loadMore(page){var isDownload=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var sortByTime=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var category=arguments[3];var year=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1997;dispatch({type:__WEBPACK_IMPORTED_MODULE_2__ActionType__[\"y\" /* ACTION_VIDEO_BEGIN_LOADING */],category:category});var GET_MOVIES=__WEBPACK_IMPORTED_MODULE_3__config_API__[\"a\" /* CloudServerAPI */].GET_MOVIES;var URL=GET_MOVIES.api+'?'+GET_MOVIES.PARAM_PAGE+'='+page+'&'+GET_MOVIES.PARAM_SIZE+'=10';// if(isDownload)\n//     URL += `&${GET_MOVIES.PARAM_IS_DOWNLOAD}=1`;\nif(sortByTime)URL+='&'+GET_MOVIES.PARAM_ORDER_PROP+'=createdAt&'+GET_MOVIES.PARAM_ORDER+'=DESC';URL+='&'+GET_MOVIES.PARAM_TYPE+'='+__WEBPACK_IMPORTED_MODULE_3__config_API__[\"a\" /* CloudServerAPI */].GET_MOVIES.TYPE_VIDEO;if(category&&category!==__WEBPACK_IMPORTED_MODULE_3__config_API__[\"a\" /* CloudServerAPI */].GET_MOVIES.CATEGORY_YEAR)URL+='&filterProps=category&filterValues='+category;else if(category===__WEBPACK_IMPORTED_MODULE_3__config_API__[\"a\" /* CloudServerAPI */].GET_MOVIES.CATEGORY_YEAR)URL+='&filterProps=releaseTime&filterValues='+year;Object(__WEBPACK_IMPORTED_MODULE_3__config_API__[\"c\" /* getCloudServerAxios */])(function(axois){axois.get(URL).then(function(res){dispatch({type:__WEBPACK_IMPORTED_MODULE_2__ActionType__[\"A\" /* ACTION_VIDEO_LOADING_FINISH */],category:category,year:year});var items=res.data.data;if(!items||items.length===0){//没有获取到数据说明说有数据都获取完毕了\ndispatch({type:__WEBPACK_IMPORTED_MODULE_2__ActionType__[\"B\" /* ACTION_VIDEO_NO_MORE */],category:category,year:year});}else{dispatch({type:__WEBPACK_IMPORTED_MODULE_2__ActionType__[\"x\" /* ACTION_VIDEO_ADD_ITEMS */],data:items,category:category,year:year});}}).catch(function(err){dispatch({type:__WEBPACK_IMPORTED_MODULE_2__ActionType__[\"B\" /* ACTION_VIDEO_NO_MORE */],category:category,year:year});dispatch({type:__WEBPACK_IMPORTED_MODULE_2__ActionType__[\"A\" /* ACTION_VIDEO_LOADING_FINISH */],category:category,year:year});console.log(err);__WEBPACK_IMPORTED_MODULE_4_antd_lib_message_index___default.a.info('获取错误');});});},changeTab:function changeTab(key){dispatch({type:__WEBPACK_IMPORTED_MODULE_2__ActionType__[\"z\" /* ACTION_VIDEO_CHANGE_TAB */],data:key});}};})(__WEBPACK_IMPORTED_MODULE_1__components__[\"o\" /* VideoComponent */]));\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/0.32754364.chunk.js","import {\r\n    connect\r\n} from 'react-redux'\r\n\r\nimport {\r\n    VideoComponent\r\n} from '../../components'\r\nimport {\r\n    ACTION_VIDEO_LOADING_FINISH,\r\n    ACTION_VIDEO_NO_MORE,\r\n    ACTION_VIDEO_CHANGE_TAB,\r\n    ACTION_VIDEO_BEGIN_LOADING,\r\n    ACTION_VIDEO_ADD_ITEMS,\r\n} from '../../ActionType';\r\nimport {\r\n    CloudServerAPI,\r\n    getCloudServerAxios,\r\n} from '../../config/API';\r\nimport message from \"antd/lib/message/index\";\r\n\r\nexport default connect(\r\n    (state) => {\r\n        return {\r\n            ...state.VideoReducer\r\n        }\r\n    },\r\n    (dispatch) => {\r\n        return {\r\n            loadMore: (page, isDownload = false, sortByTime = true, category, year = 1997) => {\r\n                dispatch({\r\n                    type: ACTION_VIDEO_BEGIN_LOADING,\r\n                    category: category\r\n                });\r\n                const GET_MOVIES = CloudServerAPI.GET_MOVIES;\r\n                let URL = `${GET_MOVIES.api}?${GET_MOVIES.PARAM_PAGE}=${page}&${GET_MOVIES.PARAM_SIZE}=10`;\r\n                // if(isDownload)\r\n                //     URL += `&${GET_MOVIES.PARAM_IS_DOWNLOAD}=1`;\r\n                if(sortByTime)\r\n                    URL += `&${GET_MOVIES.PARAM_ORDER_PROP}=createdAt&${GET_MOVIES.PARAM_ORDER}=DESC`;\r\n                URL += `&${GET_MOVIES.PARAM_TYPE}=${CloudServerAPI.GET_MOVIES.TYPE_VIDEO}`;\r\n                if(category && category !== CloudServerAPI.GET_MOVIES.CATEGORY_YEAR)\r\n                    URL += `&filterProps=category&filterValues=${category}`;\r\n                else if (category === CloudServerAPI.GET_MOVIES.CATEGORY_YEAR)\r\n                    URL += `&filterProps=releaseTime&filterValues=${year}`;\r\n                getCloudServerAxios(axois => {\r\n                    axois.get(URL)\r\n                        .then(res => {\r\n                            dispatch({\r\n                                type: ACTION_VIDEO_LOADING_FINISH,\r\n                                category: category,\r\n                                year: year\r\n                            });\r\n                            let items = res.data.data;\r\n                            if (!items || items.length === 0) {       //没有获取到数据说明说有数据都获取完毕了\r\n                                dispatch({\r\n                                    type: ACTION_VIDEO_NO_MORE,\r\n                                    category: category,\r\n                                    year: year\r\n                                });\r\n                            } else {\r\n                                dispatch({\r\n                                    type: ACTION_VIDEO_ADD_ITEMS,\r\n                                    data: items,\r\n                                    category: category,\r\n                                    year: year\r\n                                })\r\n                            }\r\n                        })\r\n                        .catch(err => {\r\n                            dispatch({\r\n                                type: ACTION_VIDEO_NO_MORE,\r\n                                category: category,\r\n                                year: year\r\n                            });\r\n                            dispatch({\r\n                                type: ACTION_VIDEO_LOADING_FINISH,\r\n                                category: category,\r\n                                year: year\r\n                            });\r\n                            console.log(err);\r\n                            message.info('获取错误')\r\n                        });\r\n                });\r\n            },\r\n            changeTab: (key) => {\r\n                dispatch({\r\n                    type: ACTION_VIDEO_CHANGE_TAB,\r\n                    data: key,\r\n                })\r\n            }\r\n        }\r\n    },\r\n) (VideoComponent)\n\n\n// WEBPACK FOOTER //\n// ./src/containers/video/index.js"],"sourceRoot":""}